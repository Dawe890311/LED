# 🌱 LED植物照明光学度量体系分析系统

一个专业的LED植物照明光谱分析工具，基于最新的植物光生物学研究成果，提供全面的光质评价和优化建议。

![Python](https://img.shields.io/badge/Python-3.8+-blue)
![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red)
![License](https://img.shields.io/badge/License-MIT-green)

## 🎯 项目概述

本系统专为科研院所、植物工厂、LED制造商设计，提供科学严谨的植物照明光谱分析。基于McCree (1972)植物光合敏感曲线和现代光生物学理论，实现从基础光学参数到复杂植物生理响应的全方位评价。

### ✨ 核心特性

- 🔬 **多维度光学分析**：涵盖辐射度学、光度学、光子度量学、植物光子度量学四大体系
- 🌿 **植物生理响应评估**：隐花色素、光敏色素、花青素、叶绿素合成指数
- 🌾 **作物适应性评价**：针对叶菜类、果菜类、育苗专用的智能评分系统
- 📈 **生长阶段匹配**：发芽期、苗期、营养生长期、开花期、结果期适配性分析
- 🎨 **光谱质量评估**：光谱完整性、平衡性、雷达图可视化分析
- 💰 **能效经济分析**：能耗成本、光效成本比、投资回报评估
- 💡 **智能优化建议**：自动检测问题并提供分级优化方案
- 📊 **可视化展示**：彩虹光谱图、雷达图、柱状图等多种图表

## 🚀 快速开始

### 环境要求

- Python 3.8 或更高版本
- 推荐使用 Anaconda 或 Miniconda

### 安装依赖

```bash
# 克隆或下载项目
# 进入项目目录
cd 科研植物灯光效分析

# 安装依赖
pip install -r requirements.txt
```

### 运行程序

```bash
streamlit run led_plant_analysis.py
```

程序启动后，会自动在浏览器中打开 `http://localhost:8501`

## 📋 使用说明

### 1. 准备数据文件

支持的文件格式：
- **CSV** (.csv)
- **TXT** (.txt) 
- **Excel** (.xlsx, .xls)

数据格式要求：
- 至少包含两列：波长(nm) 和 辐射强度
- 数据必须为数值型，不能包含文字
- 建议波长范围：200-1000nm
- 重点关注PAR波段：400-700nm

### 2. 输入测试参数

- **总辐射通量** (W)：LED灯具的总辐射输出
- **总功率** (W)：LED灯具的电功率消耗
- **后面板温度** (℃)：散热性能评估参数
- **功率因数**：电能利用效率指标

### 3. 上传光谱文件

点击"选择光谱数据文件"，上传准备好的光谱数据。系统会自动：
- 检测数据格式和质量
- 提供详细的诊断报告
- 给出数据问题的解决建议

### 4. 查看分析结果

系统提供以下分析模块：

#### 🎯 核心性能指标
- **PPE** (μmol/J)：最新的光合光子效率标准
- **光子辐射转化系数**：光合有效光子产生效率
- **总光子通量** (μmol/s)：实际光合有效输出
- **PAR效率**：光合有效辐射比例

#### 🧬 植物生理响应指标
- **隐花色素活性**：影响向光性和生物钟调节
- **光敏色素活性**：调节光周期响应
- **花青素合成指数**：影响抗逆性和着色
- **叶绿素合成指数**：影响光合色素合成

#### 🌾 作物适应性评价
- **叶菜类适应性**：生菜、菠菜、小白菜等 (评分0-100)
- **果菜类适应性**：番茄、黄瓜、辣椒等 (评分0-100)
- **育苗专用适应性**：种子萌发、幼苗培育 (评分0-100)

#### 📈 生长阶段适配性
- 发芽期、苗期、营养生长期、开花期、结果期
- 每个阶段的专门评分和可视化分析

#### 🌈 光谱质量综合分析
- 光谱完整性和平衡性评估
- 多维度雷达图分析
- 各波段分布占比统计

#### 💰 能效与经济性分析
- 光能利用效率和热损失率
- 年度运营成本估算
- 光效成本比和投资回报评估

#### 💡 智能光谱优化建议
- 自动问题检测和分级
- 🔴 高优先级：PPE、PAR效率问题
- 🟡 中优先级：红蓝比、热损失问题  
- 🟢 低优先级：其他优化建议

## 📊 计算公式

### 核心算法

```
光子辐射转化系数 = 光合有效积分 ÷ 总积分
总光子通量 = 总辐射通量 × 光子辐射转化系数 (μmol/s)
PPE = 总光子通量 ÷ 总功率 (μmol/J)
```

### 积分计算

```
积分值 = (波长 × 辐射强度) ÷ 119.8
光合有效积分 = Σ积分值
总积分 = Σ辐射值
```

### 评价标准

- **PPE等级**：>2.5优秀，2.0-2.5良好，<2.0一般
- **PAR效率**：>80%优秀，60-80%良好，<60%一般  
- **R/B比值**：叶菜类0.5-1.5，果菜类1.0-3.0

## 📁 项目结构

```
科研植物灯光效分析/
├── led_plant_analysis.py     # 主程序文件
├── requirements.txt          # 依赖列表
├── README.md                # 项目说明
├── sample_data/             # 示例数据
└── docs/                    # 相关文档
```

## 🔧 数据格式示例

### 正确格式 ✅

```csv
波长(nm),辐射强度
400,0.12
410,0.18
420,0.25
430,0.31
440,0.28
450,0.22
```

### 常见错误 ❌

- 包含非数值字符
- 数据中有空行
- 使用逗号作小数分隔符
- 第1行包含无关文字说明

## 🛠️ 故障排除

### 常见问题

**Q: 上传文件后显示"数据清洗后为空"**
A: 检查数据格式是否正确，确保：
- 第1列为数值型波长数据
- 第2列为数值型辐射数据  
- 没有空行或非数值字符
- 可下载系统提供的示例文件作参考

**Q: 光谱图显示异常**
A: 检查波长范围是否合理（建议200-1000nm），数据点是否足够（建议>50个点）

**Q: 程序运行缓慢**
A: 建议控制数据点数量在1000以内，过多数据点会影响渲染性能

## 🤝 贡献指南

欢迎提交问题和改进建议！

1. Fork 本项目
2. 创建特性分支
3. 提交更改
4. 发起 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 📞 联系方式

- 项目地址：[GitHub Repository]
- 技术支持：[support@example.com]
- 问题反馈：[GitHub Issues]

## 🔬 学术引用

如果本系统对您的研究有帮助，请考虑在论文中引用：

```
@software{led_plant_analysis_2024,
  title={LED植物照明光学度量体系分析系统},
  author={Your Name},
  year={2024},
  url={https://github.com/your-username/led-plant-analysis}
}
```

## 📚 参考文献

- McCree, K.J. (1972). The action spectrum, absorptance and quantum yield of photosynthesis in crop plants. Agricultural Meteorology, 9, 191-216.
- 现代植物光生物学相关研究
- LED植物照明国际标准

---

<div align="center">
<b>🌱 让科学照亮植物生长之路 🌱</b>
</div>